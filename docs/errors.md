# Ошибки и коды ответов
API широко использует информирование при помощи кодов ответов. Приложение должно корректно их обрабатывать.

При каждой ошибке, помимо кода ответа, в теле ответа выдаётся дополнительная информация, 
позволяющая разработчику понять причину соответствующего ответа.

Все ошибки выдаются в формате:
```json
{
    "errors": [
        {
            "type": "...",
            "value": "..."
        }
    ]
}
```
Одновременно может выдаваться несколько ошибок.  
Ключ `type` присутствует в каждом объекте массива `errors`, `value` — опционален.

> Помимо описанных выше `errors`, API может выдавать дополнительно другие ключи, оставленные для обратной совместимости. __Использовать их не рекомендуется.__

`type` содержит текстовый идентификатор ошибки.

## Ошибка в запросе

В случае невозможности найти запрашиваемый ресурс вернётся ответ `404 Not Found` и в массиве `errors` будет объект:
```json
{
    "type": "not_found"
}
```

При ошибке в параметрах запроса (к примеру, `GET https://api.hh.ru/vacancies/?employer_id=foo`) в ответ придёт `400 Bad Request`, в массиве ошибок будет объект:
```json
{
    "type": "bad_argument",
    "value": "employer_id"
}
```

## Системная ошибка

Если в данный момент сервис не может обработать запрос, но он его корректно понял, то в ответ придёт `503 Service Unavailable` и `type` будет содержать `service_unavailable`.

В случае непредвиденной ситуации API вернёт 500.

## Ошибки отдельных сервисов

В тех случаях, когда сервис способен выдать более подробную информацию об ошибке, она будет выдана в теле ответа. В этом случае скорее всего код ответа будет 400, 403, 409, 429, но возможны и другие.

Как минимум, приложение должно корректно обрабатывать HTTP-коды ответов. Для более удобной работы с приложением рекомендуется также обрабатывать пришедший тип ответа. Приведенные ниже таблицы содержат неполный список ошибок, он может расширяться.

<a name="artifacts"/>
### Артефакты
При загрузке артефактов помимо прочих возможны следующие ошибки:

HTTP code | type | value | описание
----------|-----|-------|-----------
400 | bad_argument | file | не указан файл, либо указано несколько
400 | bad_argument | type | некорректное значение параметра type 
400 | bad_argument | description | слишком длинное описание
400 | artifacts | limit_exceeded | превышено количество артефактов
400 | artifacts | image_too_large | размер файла больше допустимого
400 | artifacts | unknown_format | неизвестный формат файла
403 | forbidden | — | ошибка прав доступа 

<a name="negotiations"/>
### Переписка (отклики/приглашения)

Помимо общих ошибок `400` с `bad argument` (проблемы с передачей обязательных параметров), могут быть возвращены следующие ошибки:

HTTP code | type | value | описание
----------|-----|-------|-----------
400 | negotiations | vacancy_not_found | вакансия не найдена
400 | negotiations | resume_not_found | резюме не найдено
403 | negotiations | already_applied | уже есть отклик/приглашение на указанную связку resume_id+vacancy_id
403 | negotiations | test_required | для отклика необходимо пройти тест (в данный момент, отклик на такие вакансии через API недоступен)
403 | negotiations | resume_visibility_conflict | невозможно откликнуться на анонимную вакансию резюме с видимостью "белый список"
403 | negotiations | edit_forbidden | редактирование сообщения недоступно
403 | negotiations | application_denied | общая ошибка запрета отклика в случае, когда дополнительная информация недоступна
400 | negotiations | limit_exceeded | превышен лимит количества откликов
